<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, shrink-to-fit=0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <style>
  html {
    display: flex;
    flex-direction: column;
  }
  body {
    max-width: 720px;
    margin: 40px 40px;
    min-width: 0;
    font-family: -apple-system, BlinkMacSystemFont, Helvetica, sans-serif;
  }
  h2 {
    color: #1d1d1d;
    margin: 0;
    margin-bottom: 10px;
  }
  p {
    margin: 0;
    padding: 0;
    line-height: 1.5;
    font-size: 16px;
  }
  code {
    background: #ececec;
    padding: 4px 6px;
    border-radius: 3px;
    font-size: 16px;
  }
  .directory {
    font-size: 14px;
  }
  .block {
    white-space: pre-wrap;
    resize: none;
    background: #ececec;
    border: none;
    overflow: auto;
    /* outline: none; */
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    padding: 10px;
    border-radius: 3px;
    box-sizing: border-box;
    max-width: 720px;
    font-size: 12px;
    font-family: monospace;
    outline: none;
    overflow: hidden;
    border: 1px solid transparent;
  }
  .block::selection {
    background: #a5efd1;
  }
  .block:focus {
    border: 1px solid #a5efd1;
  }
  blockquote {
    margin: 20px 0px;
  }
  .button {
    background: transparent;
    display: flex;
    flex-direction: row;
    align-content: center;
    align-items: center;
    justify-content: center;

    /* box-shadow: 2.5px 2.5px 10px -2px rgba(0, 0, 0, 0.1); */
    padding: 5px 10px;
    border-radius: 3px;
    font-size: 12px;
    color: inherit;
    border: none;
    outline: inherit;
    border: 1px solid #e6e6e6;
    box-sizing: border-box;
    margin-right: 10px;
  }
  .button > svg {
    margin-left: 10px;
    width: 20px;
    height: auto;
  }
  .button {
    opacity: 0.25;
    cursor: initial;
  }
  .button.enabled {
    cursor: pointer;
    opacity: 1;
  }
  .button.enabled:active {
    border: 1px solid #6ee0b3;
  }
  .button > strong {
    padding-left: 5px;
  }
  .buttons {
    display: flex;
    flex-direction: row;
    align-content: center;
    align-items: center;
  }
  .status.show {
    opacity: 1.0;
    -webkit-transition: opacity 200ms ease-out;
    -moz-transition: opacity 200ms ease-out;
    -o-transition: opacity 200ms ease-out;
    transition: opacity 200ms ease-out;
  }
  .status {
    font-size: 10px;
    opacity: 0.0;
    color: #55ca9c;
    -webkit-transition: opacity 300ms ease-out;
    -moz-transition: opacity 300ms ease-out;
    -o-transition: opacity 300ms ease-out;
    transition: opacity 300ms ease-out;
  }
  </style>
</head>
<body>
  <h2>ðŸ‘‹</h2>
  <p>Start by adding an <code>index.html</code> file to your directory. For example:</p>
  <blockquote><textarea readonly class="block"></textarea></blockquote>
  <div class="buttons">
    <button class="button enabled copy">
      <div>Copy code</div>
      <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 67 67" style="enable-background:new 0 0 67 67;" xml:space="preserve">
        <g>
          <path d="M61.559,16.528L44.432,0.713C44.064,0.377,43.583,0,43.083,0H25.446c-5.407,0-9.134,2.81-9.134,6.877V12h-3.358
            c-4.946,0-8.642,3.124-8.642,7.369V59.37c0,4.492,4.077,7.63,8.642,7.63h29.231c4.677,0,8.127-3.288,8.127-7.63V55h4.365
            c4.41,0,7.635-3.513,7.635-8.122V18.555c0-0.029,0.242-0.057,0.241-0.085c0.001-0.03,0.134-0.059,0.134-0.089
            C62.688,17.541,62.293,16.824,61.559,16.528z M44.312,6.665L55.462,16H44.312V6.665z M46.312,59.37c0,2.363-1.938,3.63-4.127,3.63
            H12.955c-2.323,0-4.642-1.381-4.642-3.63V19.369c0-2.6,3.095-3.369,4.642-3.369h15.358v15.381c0,1.104,1.396,1.619,2.5,1.619h15.5
            V59.37z M44.028,29H32.312v-9.878L44.028,29z M54.677,51h-4.365V31.047c0-0.562,0.014-1.097-0.4-1.476l-17.43-16.059
            c-0.324-0.667-0.94-1.132-1.732-1.132c-0.036,0-0.039-0.182-0.075-0.18c-0.038-0.002-0.044-0.201-0.083-0.201h-10.28V6.876
            c0-2.063,3.02-2.877,5.134-2.877h14.866V18.38c0,1.104,1.396,1.619,2.5,1.619h15.5v26.878C58.312,49.276,56.881,51,54.677,51z"/>
        </g>
      </svg>
    </button>
    <button class="button enabled write">
      <div>Add <strong>index.html</strong> file</div>
      <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 70.902 70.902" style="enable-background:new 0 0 70.902 70.902;" xml:space="preserve">
       <g>
         <path style="fill:#010002;" d="M65.695,23.161c-0.012-0.182-0.047-0.361-0.111-0.549l-0.066-0.176
           c-0.11-0.244-0.246-0.447-0.419-0.619L43.892,0.61c-0.17-0.168-0.37-0.303-0.64-0.426c-0.044-0.018-0.087-0.033-0.159-0.057
           c-0.19-0.064-0.374-0.102-0.572-0.111L42.416,0H28.405c-5.038,0-9.137,4.098-9.137,9.137v1.229h-4.944
           c-5.037,0-9.136,4.1-9.136,9.137v42.262c0,5.037,4.099,9.137,9.136,9.137h28.175c5.037,0,9.136-4.1,9.136-9.137v-1.23h4.943
           c5.038,0,9.137-4.098,9.137-9.137V23.301L65.695,23.161z M44.507,7.145l14.061,14.063h-9.111c-2.729,0-4.949-2.221-4.949-4.951
           L44.507,7.145L44.507,7.145z M47.448,61.764c0,2.73-2.221,4.951-4.95,4.951H14.323c-2.729,0-4.95-2.221-4.95-4.951V19.502
           c0-2.73,2.221-4.951,4.95-4.951h11.918v12.07c0,5.039,4.099,9.137,9.137,9.137h12.07V61.764z M30.427,26.622v-9.11l14.062,14.061
           h-9.11C32.647,31.573,30.427,29.352,30.427,26.622z M61.528,51.397c0,2.73-2.221,4.951-4.95,4.951h-4.943V33.665l-0.02-0.137
           c-0.012-0.182-0.046-0.355-0.11-0.547l-0.072-0.189c-0.111-0.242-0.246-0.439-0.41-0.604l-21.21-21.213
           c-0.168-0.166-0.369-0.301-0.585-0.398c-0.062-0.029-0.126-0.055-0.207-0.08c-0.185-0.064-0.373-0.102-0.547-0.111v0.004
           l-0.139-0.023h-4.881V9.138c0-2.73,2.221-4.951,4.951-4.951h11.918v12.07c0,5.039,4.098,9.137,9.135,9.137h12.07V51.397z"/>
         <path style="fill:#010002;" d="M29.65,38.747c0-1.104-0.896-2-2-2s-2,0.896-2,2v7.172h-7.172c-1.104,0-2,0.896-2,2
           c0,1.105,0.896,2,2,2h7.172v7.172c0,1.105,0.896,2,2,2s2-0.895,2-2v-7.172h7.173c1.104,0,2-0.895,2-2c0-1.104-0.896-2-2-2H29.65
           V38.747z"/>
       </g>
     </svg>
    </button>
    <div class="status"></div>
  </div>
  <script>
    {
      var statusTimeout;
      var codeBlock = document.querySelector('.block');
      codeBlock.innerHTML = %s;
      resize(codeBlock);

      window.addEventListener('resize', resize)

      clicked(document.querySelector('.copy'), function () {
        try {
          codeBlock.focus();
          codeBlock.select();
          if (document.execCommand('Copy')) {
            status('Copied to clipboard');
          } else {
            console.error('Could not copy: try again in a modern browser.');
          }
        } catch (err) {
          console.warn(err);
        }
      });

      var client = window['texel-dev-client'];
      if (client && typeof client.listen === 'function') {
        client.listen(function (data) {
          if (!data) return;
          if (data.event === 'write-default-html') {
            if (data.error) status(data.error);
            
          }
        });
      }
      var writeButton = document.querySelector('.write');
      var onWriteClick = clicked(writeButton, function () {
        if (client && typeof client.send === 'function') {
          status('File added');
          client.send({ event: 'write-default-html' });
          disableButton();
        } else {
          status('Oops! There was an issue');
        }
      });

      function disableButton () {
        writeButton.classList.remove('enabled');
        onWriteClick(); // detach event
      }

      function status (msg) {
        if (statusTimeout) clearTimeout(statusTimeout);
        var el = document.querySelector('.status');
        el.textContent = msg;
        el.className = 'status';
        el.classList.add('show');
        statusTimeout = setTimeout(() => {
          el.classList.remove('show');
        }, 1500);
      }

      function clicked (el, cb) {
        var done = function () {
          if (cb) cb();
        };
        el.addEventListener('click', done);

        return function () {
          if (done) el.removeEventListener('click', done);
          done = null;
        }
      }

      function resize () {
        codeBlock.style.width = '100%';
        codeBlock.style.height = 'auto';
        codeBlock.style.height = codeBlock.scrollHeight + 'px';
      }
    }
  </script>
</body>
</html>